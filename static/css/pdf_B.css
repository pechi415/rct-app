/* =========================================================
   RCT PDF B - WeasyPrint (A4 LANDSCAPE)
   Objetivo: menos páginas, layout uniforme, sin reglas duplicadas.
========================================================= */

:root{
  --text:#111827;
  --muted:#6B7280;
  --line:#E5E7EB;
  --soft:#F3F4F6;
  --card:#FFFFFF;
}

/* =======================
   PÁGINA + HEADER/FOOTER
======================= */
@page{
  size: A4 landscape;
  /* ✅ un poco más compacto para ahorrar hojas */
  margin: 12mm 10mm 10mm 10mm;

  @top-center{ content: element(page-header); }
  @bottom-center{
    content: "Página " counter(page) " de " counter(pages);
    font-size: 8.5pt;
    color: var(--muted);
  }
}

/* Running header */
.page-header{ position: running(page-header); }

.header-inner{
  height: 12mm;
  padding: 0;
  border-bottom: 1px solid var(--line);

  display: table;
  width: 100%;
  table-layout: fixed;
}
.hdr-left,.hdr-center,.hdr-right{ display: table-cell; vertical-align: middle; }
.hdr-left{ width: 14%; }
.hdr-center{ width: 38%; text-align:center; }
.hdr-right{ width: 48%; text-align:right; padding-top: 6mm; }

.hdr-logo{ height: 9mm; width:auto; display:inline-block; }
.hdr-title{
  font-size: 16pt;
  font-weight: 900;
  color: var(--text);
  letter-spacing: .2px;
  white-space: nowrap;
}
.hdr-meta{
  font-size: 7.5pt;
  line-height: 1.05;
  color: #374151;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.hdr-sep{ margin: 0 4px; color:#9CA3AF; }
.hdr-item{ font-weight: 500; }

/* =======================
   BASE
======================= */
html, body{
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  color: var(--text);
  font-size: 10pt;
  line-height: 1.25;
}
*{ box-sizing: border-box; }

.muted{ color: var(--muted); }
.nowrap{ white-space: nowrap; }
.mono{ font-family: "Courier New", Courier, monospace; font-weight: 700; }

.mt-10{ margin-top: 10px; }
.mt-14{ margin-top: 10px; }

.section{ margin: 0 0 3.5mm 0; }
.page-break{ page-break-before: always; }

/* =======================
   TÍTULOS + BADGE
======================= */
h1,h2,h3{ margin:0; }

.h2{ font-size: 11pt; line-height: 1.15; }
.h3{ font-size: 10.5pt; color: var(--text); }

.section-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding-bottom: 0.8mm;
  margin-bottom: 1.2mm;
  border-bottom: 1px solid var(--line);
  page-break-after: avoid;
}

.badge{
  font-size: 8pt;
  color: var(--text);
  background: var(--soft);
  border: 1px solid var(--line);
  padding: 0.9mm 2.2mm;
  border-radius: 999px;
}

.badge-ok{ background:#ECFDF5; border-color:#A7F3D0; color:#065F46; }
.badge-warn{ background:#FEFCE8; border-color:#FDE68A; color:#854D0E; }
.badge-bad{ background:#FEF2F2; border-color:#FECACA; color:#991B1B; }

/* =======================
   GRID 2 COLUMNAS
======================= */
.two-col{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 4.5mm;
  align-items:start;
}

/* =======================
   CARD / SUBCARD (únicas)
======================= */
.card{
  border: 1px solid var(--line);
  background: var(--card);
  border-radius: 10px;
  padding: 3mm;              /* ✅ más compacto */
  page-break-inside: avoid;
  break-inside: avoid;
  overflow: hidden;
}

.subcard{
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 2.4mm 2.6mm;      /* ✅ más compacto */
  background: #fff;
}

.subhead{
  font-size: 11pt;
  font-weight: 900;
  line-height: 1.15;
  padding-bottom: 6px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--line);
  color: var(--text);
}
.subhead-sm{
  font-size: 10pt;
  font-weight: 900;
  line-height: 1.15;
  padding-bottom: 6px;
  margin: 0 0 8px 0;
  border-bottom: 1px solid var(--line);
}

.divider-hr{
  height: 1px;
  background: var(--line);
  margin: 10px 0 8px 0;
}

/* =======================
   EMPTY
======================= */
.empty{
  border: 1px dashed var(--line);
  background: #FCFCFD;
  padding: 2.6mm;
  border-radius: 10px;
  color: var(--muted);
  font-style: italic;
}

/* =======================
   MINI KPI (GLOBAL ÚNICO)
======================= */
.mini-kpi-row{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  margin: 6px 0 10px 0;
  page-break-inside: avoid;
  break-inside: avoid;
}
.mini-kpi{
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 7px 9px;
  background: #fff;
  min-width: 0;
  page-break-inside: avoid;
  break-inside: avoid;
}
.mini-kpi-label{
  font-size: 9px;
  color: var(--muted);
  font-weight: 900;
  line-height: 1.1;
}
.mini-kpi-value{
  font-size: 12.5px;     /* ✅ más compacto */
  font-weight: 900;
  line-height: 1.1;
  margin-top: 2px;
}

/* Colores */
.mini-ok{ background:#fbfffb; }
.mini-warn{ background:#fffdf7; }
.mini-bad{ background:#fff8f8; }
.mini-muted{ background:#fafafa; }

/* =======================
   TABLAS (ÚNICA DEFINICIÓN)
======================= */
.table{
  width:100%;
  border-collapse: collapse;
  font-size: 9pt;
  table-layout: fixed;
}
.table thead{ display: table-header-group; }
.table th,.table td{
  border: 1px solid var(--line);
  padding: 1.35mm 1.55mm;   /* ✅ compacto */
  vertical-align: top;
  word-break: break-word;
}
.table th{
  background: var(--soft);
  font-weight: 900;
  text-align:left;
}
.table tr{ page-break-inside: avoid; break-inside: avoid; }
.table tbody tr:nth-child(even){ background:#FAFAFA; }

.t-right{ text-align:right; white-space:nowrap; }
.t-center{ text-align:center; }
.wrap-soft{ white-space: normal; word-break: break-word; line-height: 1.2; }

/* Table split (2 bloques) */
.table-split td.empty-right{ border-left: 0; }

/* =======================
   PILLS
======================= */
.pill{
  display:inline-block;
  padding: 0.55mm 2mm;
  border-radius: 999px;
  font-size: 8pt;
  font-weight: 900;
  border: 1px solid var(--line);
}
.pill-ok{ background:#ECFDF5; border-color:#A7F3D0; color:#065F46; }
.pill-no{ background:#FEF2F2; border-color:#FECACA; color:#991B1B; }

/* =======================
   CHIPS
======================= */
.chip{
  display:inline-block;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 700;
  border: 1px solid #e8e8e8;
  background: #f7f7f7;
  color: #111;
  white-space: nowrap;
}
.chip-sm{ padding: 3px 8px; font-size: 10px; }
.chip-red{ background:#ffecec; border-color:#ffd0d0; color:#7a0b0b; }

/* =======================
   LISTAS / TEXTO
======================= */
.bullets{ margin:0; padding-left: 16px; }
.bullets li{ margin: 2px 0; }
.bullets-soft{ padding-left: 16px; }
.bullets-soft li{ margin: 2px 0; }

.text-block{ white-space: pre-wrap; }
.soft-text{ color:#374151; font-size: 10pt; line-height: 1.25; }

/* =======================
   OPERACIÓN
======================= */
.rct-section{ margin: 4px 0 12px; }

.op-two-col{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-items:start;
}
.op-col{ break-inside: avoid; page-break-inside: avoid; }

.op-note{
  margin-top: 10px;
  border: 1px solid #efefef;
  border-radius: 10px;
  padding: 8px 10px;
  background: #fafafa;
}
.op-note .k{ font-size: 10px; color:#6a6a6a; margin-bottom: 3px; }
.op-note .v{ font-size: 11.5px; font-weight: 700; color:#111; line-height: 1.25; white-space: normal; }
.op-sep{ margin: 0 6px; color:#9ca3af; }
.op-muted{ color:#666; font-weight:700; }

.note{
  font-size: 10.5px;
  color: #555;
  border-left: 3px solid #111;
  padding: 6px 10px;
  background: #fafafa;
  border-radius: 10px;
}

/* Llegada buses: divisor central uniforme + evitar doble borde */
#operacion table.table-split{ border-collapse: collapse; }
#operacion table.table-split th,#operacion table.table-split td{ border: 1px solid var(--line); }
#operacion table.table-split th:nth-child(2),
#operacion table.table-split td:nth-child(2){ border-right: 0 !important; }
#operacion table.table-split th:nth-child(3),
#operacion table.table-split td:nth-child(3){ border-left: 1px solid var(--line) !important; }

/* =======================
   AJUSTES POR SECCIÓN
======================= */

/* Gestión de áreas: tabla full ancho dentro de card */
#gestion-areas .card{ padding: 0; }
#gestion-areas .table th, #gestion-areas .table td{ border-left: 0; border-right: 0; }
#gestion-areas .ga-col-hora{ width: 70px; }
#gestion-areas .ga-col-resp{ width: 150px; }
#gestion-areas .ga-col-ok{ width: 110px; }

/* Equipos varados: tabla full ancho dentro de card */
#equipos-varados.card{ padding: 0; }
/* FIX: header de Equipos varados con aire igual a otras cards */
#equipos-varados .section-title{ padding: 8px 10px; margin-bottom: 6px; }

#equipos-varados .ev-text{ white-space: normal; line-height: 1.2; word-break: break-word; }

/* Complementarios: subcards compactas */
#complementarios-mini .subcard{ padding: 2.2mm 2.4mm; }

/* Camiones/Liviano: darle caja real sin inflar */
#dist-camiones.card, #equipo-liviano.card{ padding: 3mm; }
#dist-camiones .table, #equipo-liviano .table{ margin-top: 6px; }

/* Personal: evitar que mini-kpis se partan */
#personal .mini-kpi-row{ page-break-inside: avoid; break-inside: avoid; }
#personal .section-title{ page-break-after: avoid; break-after: avoid; }

/* Seguridad y PTS: evitar cortes feos */
#seguridad .subcard, #pts-comentarios .subcard{
  page-break-inside: avoid;
  break-inside: avoid;
}

/* PDF B: headers igual a Equipos varados */
#dist-camiones.card,
#equipo-liviano.card,
#complementarios-mini.card{
  padding: 0;                 /* igual que Varados */
}

#dist-camiones .section-title,
#equipo-liviano .section-title,
#complementarios-mini .section-title{
  padding: 8px 10px;          /* mismo padding del header */
}

/* Aire consistente debajo del header cuando una sección arranca página */
#personal,
#seguridad,
#pts-comentarios{
  padding-top: 3mm;   /* prueba 3mm–6mm */
}
